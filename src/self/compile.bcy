mod tokenizer;
mod parser;
mod analyze;
mod emit_vm;

fn start(args) {
    let tok = tokenizer::make_tokenizer(file::open(str::concat(args[1], ".bcy")));
    let anl = analyze::make_analyzer();
    loop {
        if tokenizer::peek(tok).t == "eof" break;
        analyze::analyze_stmt(anl, parser::next_stmt(tok));
    };
    printv(anl);
    emit_vm::emit_instrs_to_file(file::create(str::concat(args[1], ".bcc")), anl.out);
}
